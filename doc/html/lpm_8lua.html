<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.6"/>
<title>MoonGen: lpm.lua File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">MoonGen
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.6 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Home</span></a></li>
      <li><a href="download.html"><span>Download</span></a></li>
      <li><a href="documentation.html"><span>Documentation</span></a></li>
      <li class="current"><a href="files.html"><span>Filebrowser</span></a></li>
      <li><a href="examples.html"><span>Examples</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('lpm_8lua.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">lpm.lua File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Longest Prefix Matching ...  
<a href="#details">More...</a></p>

<p><a href="lpm_8lua_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:aff86542a7958b8cd0cb36449c166e596"><td class="memItemLeft" align="right" valign="top">function <a class="el" href="dpdk_8lua.html#a93cc9d5f326c929f86fabf7a33c1bb65">mod</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="lpm_8lua.html#aff86542a7958b8cd0cb36449c166e596">createLpm4Table</a> (socket, table, entry_ctype)</td></tr>
<tr class="memdesc:aff86542a7958b8cd0cb36449c166e596"><td class="mdescLeft">&#160;</td><td class="mdescRight">Create a new LPM lookup table.  <a href="#aff86542a7958b8cd0cb36449c166e596">More...</a><br/></td></tr>
<tr class="separator:aff86542a7958b8cd0cb36449c166e596"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abced5ddfbd7f10608471b355d921d4e5"><td class="memItemLeft" align="right" valign="top">function mg_lpm4Table&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="lpm_8lua.html#abced5ddfbd7f10608471b355d921d4e5">addEntry</a> (addr, depth, entry)</td></tr>
<tr class="memdesc:abced5ddfbd7f10608471b355d921d4e5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Add an entry to a Table.  <a href="#abced5ddfbd7f10608471b355d921d4e5">More...</a><br/></td></tr>
<tr class="separator:abced5ddfbd7f10608471b355d921d4e5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0b4e1871e2d2b90ebe9e2b762f635fa0"><td class="memItemLeft" align="right" valign="top">function mg_lpm4Table&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="lpm_8lua.html#a0b4e1871e2d2b90ebe9e2b762f635fa0">lookupBurst</a> (packets, mask, hitMask, entries)</td></tr>
<tr class="memdesc:a0b4e1871e2d2b90ebe9e2b762f635fa0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Perform IPv4 route lookup for a burst of packets This should not be used for single packet lookup, as ist brings a significant penalty for bursts &lt;&lt;64.  <a href="#a0b4e1871e2d2b90ebe9e2b762f635fa0">More...</a><br/></td></tr>
<tr class="separator:a0b4e1871e2d2b90ebe9e2b762f635fa0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8e4980bd6d919e4c44c45fb7c23ac3b8"><td class="memItemLeft" align="right" valign="top">function mg_lpm4Table&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="lpm_8lua.html#a8e4980bd6d919e4c44c45fb7c23ac3b8">allocateEntry</a> ()</td></tr>
<tr class="memdesc:a8e4980bd6d919e4c44c45fb7c23ac3b8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Allocates an LPM table entry.  <a href="#a8e4980bd6d919e4c44c45fb7c23ac3b8">More...</a><br/></td></tr>
<tr class="separator:a8e4980bd6d919e4c44c45fb7c23ac3b8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae5d10506d377e0f4d8211e618c1f6d0a"><td class="memItemLeft" align="right" valign="top">function mg_lpm4Table&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="lpm_8lua.html#ae5d10506d377e0f4d8211e618c1f6d0a">allocateEntryPtrs</a> (<a class="el" href="memory_8lua.html#aeab71244afb687f16d8c4f5ee9d6ef0e">n</a>)</td></tr>
<tr class="memdesc:ae5d10506d377e0f4d8211e618c1f6d0a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Allocates an array of pointers to routing table entries This is used during burst lookup, to store references to the result entries.  <a href="#ae5d10506d377e0f4d8211e618c1f6d0a">More...</a><br/></td></tr>
<tr class="separator:ae5d10506d377e0f4d8211e618c1f6d0a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2c922a24ecb9b79a185e1e979b5b27a5"><td class="memItemLeft" align="right" valign="top">function <a class="el" href="dpdk_8lua.html#a93cc9d5f326c929f86fabf7a33c1bb65">mod</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="lpm_8lua.html#a2c922a24ecb9b79a185e1e979b5b27a5">decrementTTL</a> (pkts, in_mask, out_mask, ipv4)</td></tr>
<tr class="memdesc:a2c922a24ecb9b79a185e1e979b5b27a5"><td class="mdescLeft">&#160;</td><td class="mdescRight">FIXME: this should not be in LPM module.  <a href="#a2c922a24ecb9b79a185e1e979b5b27a5">More...</a><br/></td></tr>
<tr class="separator:a2c922a24ecb9b79a185e1e979b5b27a5"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Longest Prefix Matching ... </p>
<dl class="todo"><dt><b><a class="el" href="todo.html#_todo000016">Todo:</a></b></dt><dd>TODO docu </dd></dl>

<p>Definition in file <a class="el" href="lpm_8lua_source.html">lpm.lua</a>.</p>
</div><h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="abced5ddfbd7f10608471b355d921d4e5"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">function mg_lpm4Table addEntry </td>
          <td>(</td>
          <td class="paramtype">addr&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">depth&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">entry&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Add an entry to a Table. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">addr</td><td>IPv4 network address of the destination network. </td></tr>
    <tr><td class="paramname">depth</td><td>number of significant bits of the destination network address </td></tr>
    <tr><td class="paramname">entry</td><td>routing table entry (will be copied) </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>true if entry was added without error </dd></dl>

</div>
</div>
<a class="anchor" id="a8e4980bd6d919e4c44c45fb7c23ac3b8"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">function mg_lpm4Table allocateEntry </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Allocates an LPM table entry. </p>
<dl class="section return"><dt>Returns</dt><dd>The newly allocated entry </dd></dl>

</div>
</div>
<a class="anchor" id="ae5d10506d377e0f4d8211e618c1f6d0a"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">function mg_lpm4Table allocateEntryPtrs </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="memory_8lua.html#aeab71244afb687f16d8c4f5ee9d6ef0e">n</a>&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Allocates an array of pointers to routing table entries This is used during burst lookup, to store references to the result entries. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">n</td><td>Number of entry pointers </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Wrapper table around the allocated array </dd></dl>

</div>
</div>
<a class="anchor" id="aff86542a7958b8cd0cb36449c166e596"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">function <a class="el" href="dpdk_8lua.html#a93cc9d5f326c929f86fabf7a33c1bb65">mod</a> createLpm4Table </td>
          <td>(</td>
          <td class="paramtype">socket&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">table&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">entry_ctype&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Create a new LPM lookup table. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">socket</td><td>optional (default = socket of the calling thread), CPU socket, where memory for the table should be allocated. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>the table handler </dd></dl>

</div>
</div>
<a class="anchor" id="a2c922a24ecb9b79a185e1e979b5b27a5"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">function <a class="el" href="dpdk_8lua.html#a93cc9d5f326c929f86fabf7a33c1bb65">mod</a> decrementTTL </td>
          <td>(</td>
          <td class="paramtype">pkts&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">in_mask&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">out_mask&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">ipv4&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>FIXME: this should not be in LPM module. </p>
<p>but where? Decrements the IP TTL field of all masked packets by one. out_mask masks the successfully decremented packets (TTL did not reach zero). </p>

</div>
</div>
<a class="anchor" id="a0b4e1871e2d2b90ebe9e2b762f635fa0"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">function mg_lpm4Table lookupBurst </td>
          <td>(</td>
          <td class="paramtype">packets&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">mask&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">hitMask&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">entries&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Perform IPv4 route lookup for a burst of packets This should not be used for single packet lookup, as ist brings a significant penalty for bursts &lt;&lt;64. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">packets</td><td>Array of mbufs (bufArray), for which the lookup will be performed </td></tr>
    <tr><td class="paramname">mask</td><td>optional (default = all packets), bitmask, for which packets the lookup should be performed </td></tr>
    <tr><td class="paramname">hitMask</td><td>Bitmask, where the routed packets are flagged with one. This may be the same Bitmask as passed in the mask parameter, in this case not routed packets will be cleared in the bitmask. </td></tr>
    <tr><td class="paramname">entries</td><td>Preallocated routing entry Pointers </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="lpm_8lua.html">lpm.lua</a></li>
    <li class="footer">Generated on Thu Aug 27 2015 17:51:42 for MoonGen by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.6 </li>
  </ul>
</div>
</body>
</html>
